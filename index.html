<meta charset="UTF-8">
<title>FaceIt Widget for elo and lvl</title>
<link rel="stylesheet" href="main.css">
<div id="wrap">
  <img id="levelpic" src="https://cdn-frontend.faceit.com/web/960/src/app/assets/images-compress/skill-icons/skill_level_0_svg.svg">
  <text id="elo">0000</text>
</div>
<br><br><br><br><br><br><br><br><br>
<div id="tutor">
  This Widget Displays <a href="https://www.faceit.com" class="yellow">FaceIt</a> user's elo and level. Numbers get updated once every 20 seconds.
  <br><br>
  <text class="yellow">Setup guide:</text><br>
  <text class="yellow">1:</text> insert your username in the URL, after the "user=" part<br>
  <text class="yellow">2:</text> put the url of this page as browser source in your streaming software. width: 85px | height: 35px
  <br><br>
  Made with ❤️ by <a href="https://github.com/gogorikidze/faceitEloWidget" class="yellow">Levan Gogorikidze</a>
</div>
<script type="text/javascript">
const url = new URLSearchParams(window.location.search);
const nickname = url.get('user');

var elodisplay = document.getElementById('elo');
var levelpic = document.getElementById('levelpic');

updateelo();
setInterval(updateelo, 20000);
function updateelo(){
  var oReq = new XMLHttpRequest();
  oReq.open('GET', 'https://open.faceit.com/data/v4/players?nickname=' + nickname + '&game=csgo&apiKey=41ee16c9-7c6e-4605-86e2-91886d85ac53');
  oReq.setRequestHeader('accept', 'application/json');
  oReq.setRequestHeader('Authorization', 'Bearer 41ee16c9-7c6e-4605-86e2-91886d85ac53');
  oReq.send();
  oReq.onload = function() {
    elo = JSON.parse(oReq.responseText).games.csgo.faceit_elo;
    levelpic.src = "https://cdn-frontend.faceit.com/web/960/src/app/assets/images-compress/skill-icons/skill_level_"+ JSON.parse(oReq.responseText).games.csgo.skill_level + "_svg.svg";
    elodisplay.innerText = elo;
  }
}
</script>
